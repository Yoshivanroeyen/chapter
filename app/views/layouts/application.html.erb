<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>TODO</title>
  <%= csrf_meta_tags %>
  <%= action_cable_meta_tag %>
  <%= stylesheet_link_tag 'application', media: 'all' %>
</head>
<body class="site">
  <%= render 'shared/navbar' %>
  <div class="site-content">
    <%= yield %>

  </div>
    <%= javascript_include_tag 'application' %>

    <!-- Include AlgoliaSearch JS Client and autocomplete.js library -->
    <script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
    <script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.min.js"></script>
    <!-- Initialize autocomplete menu -->
    <script>
    var client = algoliasearch("L4XOTOW05B", "b4f8d8f4c33526b8c662d91def380967");
    var index = client.initIndex('Book');
    //initialize autocomplete on search input (ID selector must match)
    autocomplete('#aa-search-input', {}, [
    {
      source: autocomplete.sources.hits(index, { hitsPerPage: 3 }),
      displayKey: 'name',
      templates: {
        header: '<div class="aa-suggestions-category">Books</div>',
        suggestion: function(suggestion) {
          return '<span>' +
            suggestion._highlightResult.title.value + '</span> - <span>' +
            suggestion._highlightResult.genre.value + '</span>';
        }
      }
    },
    // add code to look on authors too {
    //   source: autocomplete.sources.hits(index, { hitsPerPage: 3 }),
    //   displayKey: 'name',
    //   templates: {
    //     header: '<div class="aa-suggestions-category">Genres</div>',
    //     suggestion: function(suggestion) {
    //       return '<span>' +
    //         suggestion._highlightResult.genre.value + '</span>';
    //     }
    //   }
    // }
]);
</script>
  </body>
</html>
